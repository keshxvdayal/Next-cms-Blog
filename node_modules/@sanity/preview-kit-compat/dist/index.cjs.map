{"version":3,"file":"index.cjs","sources":["../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/rng.js","../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/stringify.js","../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/native.js","../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js","../../channels/src/constants.ts","../../channels/src/helpers.ts","../../channels/src/node.ts","../../visual-editing-helpers/dist/hooks.js","../src/useDocumentsInUse.ts"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import type { ChannelMsgType } from './types'\n\nexport const RESPONSE_TIMEOUT = 1000\nexport const HEARTBEAT_INTERVAL = 1000\nexport const HANDSHAKE_INTERVAL = 500\n\nexport const INTERNAL_MSG_TYPES = [\n  'channel/disconnect',\n  'channel/response',\n  'channel/heartbeat',\n] satisfies ChannelMsgType[]\n\nexport const HANDSHAKE_MSG_TYPES = [\n  'handshake/syn',\n  'handshake/syn-ack',\n  'handshake/ack',\n] satisfies ChannelMsgType[]\n","import { HANDSHAKE_MSG_TYPES, INTERNAL_MSG_TYPES } from './constants'\nimport { ChannelMsgType, HandshakeMsgType, InternalMsgType } from './types'\n\nexport const isInternalMessage = (\n  type: ChannelMsgType | InternalMsgType,\n): type is InternalMsgType => {\n  return INTERNAL_MSG_TYPES.some((t) => t === type)\n}\n\nexport const isHandshakeMessage = (\n  type: ChannelMsgType | InternalMsgType,\n): type is HandshakeMsgType => {\n  return HANDSHAKE_MSG_TYPES.some((t) => t === type)\n}\n\nexport const isLegacyHandshakeMessage = ({\n  data = {},\n}: MessageEvent): boolean => {\n  return (\n    // Check data is a record type\n    typeof data === 'object' &&\n    data !== null &&\n    !Array.isArray(data) &&\n    // The \"domain\" key was introduced in commit 4854e7f\n    !('domain' in data) &&\n    // Check the rest of the object shape is present\n    ['id', 'type', 'from', 'to'].every((key) => key in data) &&\n    // Prior to 4854e7f only handshake events were emitted prior to an established connection\n    data.type.startsWith('handshake/')\n  )\n}\n","import { v4 as uuid } from 'uuid'\n\nimport {\n  isHandshakeMessage,\n  isInternalMessage,\n  isLegacyHandshakeMessage,\n} from './helpers'\nimport {\n  ChannelMsg,\n  ChannelsNode,\n  ChannelsNodeChannel,\n  ChannelsNodeOptions,\n  ChannelStatus,\n  HandshakeMsgType,\n  InternalMsgType,\n  ProtocolMsg,\n  ToArgs,\n} from './types'\n\nexport function createChannelsNode<T extends ChannelMsg>(\n  config: ChannelsNodeOptions<T>,\n): ChannelsNode<T> {\n  const inFrame = window.self !== window.top || window.opener\n\n  const channel: ChannelsNodeChannel = {\n    buffer: [],\n    id: null,\n    origin: null,\n    source: null,\n    status: 'connecting',\n  }\n\n  function flush() {\n    const toFlush = [...channel.buffer]\n    channel.buffer.splice(0, channel.buffer.length)\n    toFlush.forEach(({ type, data }) => {\n      send(type, data)\n    })\n  }\n\n  function send<K extends T['type']>(\n    type: K | InternalMsgType | HandshakeMsgType,\n    data?: Extract<T, { type: K }>['data'],\n  ) {\n    if (\n      !isHandshakeMessage(type) &&\n      !isInternalMessage(type) &&\n      (channel.status === 'connecting' || channel.status === 'reconnecting')\n    ) {\n      channel.buffer.push({ type, data })\n      return\n    }\n\n    if (channel.id && channel.origin && channel.source) {\n      const msg: ProtocolMsg<T> = {\n        connectionId: channel.id,\n        data,\n        domain: 'sanity/channels',\n        from: config.id,\n        id: uuid(),\n        to: config.connectTo,\n        type,\n      }\n\n      try {\n        channel.source.postMessage(msg, {\n          targetOrigin: channel.origin,\n        })\n      } catch (e) {\n        throw new Error(`Failed to postMessage '${msg.id}' on '${config.id}'`)\n      }\n    }\n  }\n\n  function isValidMessageEvent(\n    e: MessageEvent,\n  ): e is MessageEvent<ProtocolMsg<T>> {\n    const { data } = e\n    return (\n      data.domain === 'sanity/channels' &&\n      data.to === config.id &&\n      data.from === config.connectTo &&\n      data.type !== 'channel/response'\n    )\n  }\n\n  function handleEvents(e: MessageEvent) {\n    if (isLegacyHandshakeMessage(e)) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Visual editing package mismatch detected! Please ensure you are using the latest version of Sanity Studio and any packages listed here:\\nhttps://github.com/sanity-io/visual-editing',\n      )\n      return\n    }\n\n    if (isValidMessageEvent(e)) {\n      const { data } = e\n      // Once we know the origin, after a valid handshake, we always verify it\n      if (channel.origin && e.origin !== channel.origin) {\n        return\n      }\n      // Always update the channel source reference, in case it changes\n      if (e.source && channel.source !== e.source) {\n        channel.source = e.source\n      }\n\n      if (isHandshakeMessage(data.type) && data.data) {\n        if (data.type === 'handshake/syn') {\n          channel.origin = e.origin\n          channel.id = data.data.id as string\n          setConnectionStatus('connecting')\n          send('handshake/syn-ack', { id: channel.id })\n          return\n        }\n        if (data.type === 'handshake/ack' && data.data.id === channel.id) {\n          setConnectionStatus('connected')\n          return\n        }\n      } else if (\n        data.connectionId === channel.id &&\n        e.origin === channel.origin\n      ) {\n        if (data.type === 'channel/disconnect') {\n          setConnectionStatus('disconnected')\n          return\n        } else {\n          const args = [data.type, data.data] as ToArgs<T>\n          config.onEvent?.(...args)\n          send('channel/response', { responseTo: data.id })\n        }\n        return\n      }\n    }\n  }\n\n  function disconnect() {\n    if (['disconnected'].includes(channel.status)) return\n    // send('channel/disconnect', { id: channel.id })\n    setConnectionStatus('disconnected')\n  }\n\n  function destroy() {\n    disconnect()\n    window.removeEventListener('message', handleEvents, false)\n  }\n\n  function setConnectionStatus(next: ChannelStatus) {\n    channel.status = next\n    config?.onStatusUpdate?.(next)\n    if (next === 'connected') {\n      flush()\n    }\n  }\n\n  function initialise() {\n    window.addEventListener('message', handleEvents, false)\n    setConnectionStatus('connecting')\n  }\n\n  initialise()\n\n  function sendPublic<K extends T['type']>(\n    type: K,\n    data?: Extract<T, { type: K }>['data'],\n  ) {\n    send(type, data)\n  }\n\n  return {\n    destroy,\n    inFrame,\n    send: sendPublic,\n  }\n}\n","import{useMemo as e,useState as n,useCallback as t,useEffect as i,useSyncExternalStore as r}from\"react\";function o(n){const t=e((()=>JSON.stringify(n||{})),[n]);return e((()=>JSON.parse(t)),[t])}function s(e){const{refreshInterval:o}=e,s=function(){const[e,t]=n(!1);i((()=>{t(navigator.onLine);const e=()=>t(!0),n=()=>t(!1);return window.addEventListener(\"online\",e),window.addEventListener(\"offline\",n),()=>{window.removeEventListener(\"online\",e),window.removeEventListener(\"offline\",n)}}),[]);const o=r(u,(()=>document.visibilityState),(()=>\"hidden\"));if(!e)return!0;if(\"hidden\"===o)return!0;return!1}(),[d,c]=n(\"hit\"),f=t((()=>(c(\"inflight\"),()=>c(\"hit\"))),[]);return i((()=>{if(!o||\"hit\"!==d)return;const e=setTimeout((()=>c(\"stale\")),o);return()=>clearTimeout(e)}),[o,d]),i((()=>{if(\"hit\"!==d)return;const e=()=>c(\"stale\");return window.addEventListener(\"focus\",e),()=>window.removeEventListener(\"focus\",e)}),[o,d]),i((()=>{s&&\"hit\"===d&&c(\"stale\"),s||\"stale\"!==d||c(\"refresh\")}),[s,d]),[d,f]}function u(e){return document.addEventListener(\"visibilitychange\",e),()=>document.removeEventListener(\"visibilitychange\",e)}export{o as useQueryParams,s as useRevalidate};//# sourceMappingURL=hooks.js.map\n","import { type ChannelsNode, createChannelsNode } from '@sanity/channels'\nimport type { ContentSourceMapDocuments } from '@sanity/client/csm'\nimport {\n  type VisualEditingConnectionIds,\n  type VisualEditingMsg,\n} from '@sanity/visual-editing-helpers'\nimport { useEffect, useState } from 'react'\n\n/**\n * Reports the documents in use on the page to the Presentation Tool, if a connection can be established.\n * @internal\n */\nexport function useDocumentsInUse(\n  documentsInUse: Map<string, ContentSourceMapDocuments[number]>,\n  projectId: string,\n  dataset: string,\n): void {\n  const [channel, setChannel] = useState<\n    ChannelsNode<VisualEditingMsg> | undefined\n  >()\n  const [connected, setConnected] = useState(false)\n  useEffect(() => {\n    if (window.self === window.top && !window.opener) {\n      return\n    }\n    const channel = createChannelsNode<VisualEditingMsg>({\n      id: 'preview-kit' satisfies VisualEditingConnectionIds,\n      connectTo: 'presentation' satisfies VisualEditingConnectionIds,\n      onStatusUpdate(status) {\n        if (status === 'connected') {\n          setConnected(true)\n        } else if (status === 'disconnected') {\n          setConnected(false)\n        }\n      },\n    })\n    const timeout = setTimeout(() => setChannel(channel), 0)\n    return () => {\n      clearTimeout(timeout)\n      channel.destroy()\n      setChannel(undefined)\n    }\n  }, [dataset, projectId])\n\n  const changedKeys = JSON.stringify(Array.from(documentsInUse.keys()))\n  useEffect(() => {\n    if (changedKeys !== '[]' && channel && connected) {\n      channel.send('preview-kit/documents', {\n        projectId,\n        dataset,\n        perspective: 'previewDrafts',\n        documents: Array.from(documentsInUse.values()),\n      })\n    }\n  }, [changedKeys, channel, connected, dataset, documentsInUse, projectId])\n}\n"],"names":["Object","defineProperty","exports","value","react","require","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","Error","byteToHex","i","push","toString","slice","native","randomUUID","v4","options","buf","offset","rnds","random","arr","unsafeStringify","INTERNAL_MSG_TYPES","HANDSHAKE_MSG_TYPES","isInternalMessage","type","some","t","isHandshakeMessage","isLegacyHandshakeMessage","data","Array","isArray","every","key","startsWith","createChannelsNode","config","inFrame","window","self","top","opener","channel","buffer","id","origin","source","status","send","msg","connectionId","domain","from","uuid","to","connectTo","postMessage","targetOrigin","e","concat","handleEvents","_a","console","error","isValidMessageEvent","setConnectionStatus","args","onEvent","responseTo","next","onStatusUpdate","call","toFlush","splice","length","forEach","flush","addEventListener","destroy","includes","removeEventListener","u","document","useDocumentsInUse","documentsInUse","projectId","dataset","setChannel","useState","connected","setConnected","useEffect","timeout","setTimeout","clearTimeout","changedKeys","JSON","stringify","keys","perspective","documents","values","useQueryParams","n","parse","useRevalidate","refreshInterval","o","s","navigator","onLine","r","visibilityState","d","c","f"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}