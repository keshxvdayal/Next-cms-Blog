"use strict";var e=require("@sanity/visual-editing"),t=require("next/router.js"),r=require("react");exports.default=function(u){const{zIndex:c}=u,n=t.useRouter(),s=r.useRef(n),[a,o]=r.useState();r.useEffect((()=>{s.current=n}),[n]),r.useEffect((()=>{const t=e.enableVisualEditing({zIndex:c,history:{subscribe:e=>(o((()=>e)),()=>o(void 0)),update:e=>{switch(e.type){case"push":return s.current.push(e.url);case"pop":return s.current.back();case"replace":return s.current.replace(e.url);default:throw new Error("Unknown update type: ".concat(e.type))}}}});return()=>t()}),[c]);const{asPath:i,basePath:l,locale:p,isReady:f}=t.useRouter();return r.useEffect((()=>{if(a&&f){const e=l||p?"".concat(l).concat(p?"/".concat(p):"").concat("/"===i?"":i):i;a({type:"push",url:e})}}),[i,l,f,p,a]),null};//# sourceMappingURL=VisualEditingComponent-Y56UGEjm.cjs.map
